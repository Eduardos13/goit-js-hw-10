{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector(\"#datetime-picker\"); // отримую інпут\\\nconst startBtn = document.querySelector(\"button\");\n\nlet userSelectedDate = null;\n\nconst options = {   // задаю налаштування пікеру, такі як 24-годинний формат\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      console.log(selectedDates[0]);\n\n      if(selectedDates[0].getTime() < Date.now()) { // перевіряю що дата не раніше моменту зараз\n        startBtn.classList.add(\"disable-btn\"); // роблю кнопку не актівною якщо дата раніше ніж зараз\n        startBtn.disabled = true;\n        return iziToast.show({\n          title: \"\",\n          message: \"Please choose a date in the future\"\n      }); // виводжу повідомлення про вибір дати в майбутньому\n      }\n      userSelectedDate = selectedDates[0]; // присвоюю обрану валідну дату змінній\n      startBtn.classList.remove(\"disable-btn\"); // роблю кнопку активною\n      startBtn.disabled = false;\n    }\n}\n\nconst handleClick = () => {\n\n    const intervalId = setInterval(convertMs, 1000);\n\n\n\n    function convertMs() {\n\n        const ms = userSelectedDate.getTime() - Date.now();\n\n        // if(ms < 0) {\n        //   clearInterval(intervalId);\n        //   console.log(\"STOP\");\n        // }\n\n        // Number of milliseconds per unit of time\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n      \n        // Remaining days\n        const days = Math.floor(ms / day);\n        // Remaining hours\n        const hours = Math.floor((ms % day) / hour);\n        // Remaining minutes\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        // Remaining seconds\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        const updatedTimeValue = (dataAttribute, newValue) => {  // функція для відмалювання компонентів в інтерфейс таймера\n\n          const timeValue = document.querySelector(`.value[data-${dataAttribute}]`);\n\n          if(timeValue) {\n            timeValue.textContent = newValue;\n          }\n        }\n\n        updatedTimeValue('days', days.toString().padStart(2, '0'));\n        updatedTimeValue('hours', hours.toString().padStart(2, '0'));\n        updatedTimeValue('minutes', minutes.toString().padStart(2, '0'));\n        updatedTimeValue('seconds', seconds.toString().padStart(2, '0'));\n\n        if(ms < 1000) {\n          clearInterval(intervalId);\n\n          startBtn.disabled = false;\n          startBtn.classList.remove(\"disable-btn\");\n          input.disabled = false;\n          input.classList.remove(\"disabled-input\");\n        }\n\n        return { days, hours, minutes, seconds };\n      }\n\n      startBtn.disabled = true;\n      startBtn.classList.add(\"disable-btn\");\n      input.disabled = true;\n      input.classList.add(\"disabled-input\");\n}\n\nconst fp = flatpickr(\"#datetime-picker\", options);  // ініціалізую бібліотеку\n\nstartBtn.addEventListener(\"click\", handleClick);\n"],"names":["input","startBtn","userSelectedDate","options","selectedDates","iziToast","handleClick","intervalId","convertMs","ms","second","minute","hour","day","days","hours","minutes","seconds","updatedTimeValue","dataAttribute","newValue","timeValue","flatpickr"],"mappings":"+IAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,QAAQ,EAEhD,IAAIC,EAAmB,KAEvB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAGrB,GAFA,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAEzBA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,MACnC,OAAAH,EAAS,UAAU,IAAI,aAAa,EACpCA,EAAS,SAAW,GACbI,EAAS,KAAK,CACnB,MAAO,GACP,QAAS,oCACnB,CAAO,EAEDH,EAAmBE,EAAc,CAAC,EAClCH,EAAS,UAAU,OAAO,aAAa,EACvCA,EAAS,SAAW,EACrB,CACL,EAEMK,EAAc,IAAM,CAEtB,MAAMC,EAAa,YAAYC,EAAW,GAAI,EAI9C,SAASA,GAAY,CAEjB,MAAMC,EAAKP,EAAiB,QAAS,EAAG,KAAK,IAAG,EAQ1CQ,EAAS,IACTC,EAASD,EAAS,GAClBE,EAAOD,EAAS,GAChBE,EAAMD,EAAO,GAGbE,EAAO,KAAK,MAAML,EAAKI,CAAG,EAE1BE,EAAQ,KAAK,MAAON,EAAKI,EAAOD,CAAI,EAEpCI,EAAU,KAAK,MAAQP,EAAKI,EAAOD,EAAQD,CAAM,EAEjDM,EAAU,KAAK,MAASR,EAAKI,EAAOD,EAAQD,EAAUD,CAAM,EAE5DQ,EAAmB,CAACC,EAAeC,IAAa,CAEpD,MAAMC,EAAY,SAAS,cAAc,eAAeF,CAAa,GAAG,EAErEE,IACDA,EAAU,YAAcD,EAE3B,EAED,OAAAF,EAAiB,OAAQJ,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,CAAC,EACzDI,EAAiB,QAASH,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,CAAC,EAC3DG,EAAiB,UAAWF,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,CAAC,EAC/DE,EAAiB,UAAWD,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,CAAC,EAE5DR,EAAK,MACN,cAAcF,CAAU,EAExBN,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,aAAa,EACvCD,EAAM,SAAW,GACjBA,EAAM,UAAU,OAAO,gBAAgB,GAGlC,CAAE,KAAAc,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEDhB,EAAS,SAAW,GACpBA,EAAS,UAAU,IAAI,aAAa,EACpCD,EAAM,SAAW,GACjBA,EAAM,UAAU,IAAI,gBAAgB,CAC1C,EAEWsB,EAAU,mBAAoBnB,CAAO,EAEhDF,EAAS,iBAAiB,QAASK,CAAW"}